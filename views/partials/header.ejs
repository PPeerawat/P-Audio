<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P | Audio</title>
    <script src="/stylesheets/main.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" defer integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheets/main.css">
    <link rel="icon" href="https://cdn-icons.flaticon.com/png/128/2168/premium/2168585.png?token=exp=1651639965~hmac=c8143685667b698c2ba31ea4c6faf236">
   
  </head>
<body>
    <div class="container">
    <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
      <a href="/" class="d-flex align-items-center col-md-3 mb-2 mb-md-0 text-dark text-decoration-none">
        <div class="name">
          <h1><i class="fa fa-music"></i><strong>&ensp;P | Audio</strong></h1>
        </div> 
      </a>

      <ul class="nav col-12 col-md-auto mb-2 justify-content-center mb-md-0">
        <li><a href="/" class="nav-link px-2 link-secondary">Home</a></li>
        <% if(currentUser){ %>
          <li><a href="/favorite/<%= currentUser._id %> " class="nav-link px-2 link-dark">My Favorite</a></li>
          
        <% } %>

      </ul>

      <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" action="/search" method="POST">
        <input type="search" name="search" class="form-control form-control-dark" placeholder="Search for Songs, Artists" aria-label="Search" required>
      </form>

      
      <div class="col-md-3 text-end">
        <% if(!currentUser){ %>
            <button type="button" class="btn btn-outline-success me-2" onclick="location.href='/login'">Login</button>
            <button type="button" class="btn btn-outline-light me-2" onclick="location.href='/register'">Register</button>
        <% }else{ %>
          <div class="dropdown">
            <span>Hello <%= currentUser.username %></span>
            <div class="dropdown-content">
              <p><a href="/user/<%= currentUser._id %>" class="nav-link">Account</a></p>
              <% if(currentUser.isAdmin === true){ %>
              <p><a href="/artist/new" class="nav-link">Add New Artist</a></p>
              <p><a href="/song/new" class="nav-link">Add New Song</a></p>
              <p><a href="/user/manage" class="nav-link">Manage user</a></p>
              <% } %> 
              <p><a href="/logout" class="nav-link">Log out</a></p>
            </div>
          </div>
        <% } %> 
      </div>
    </header>
  </div>
  <% if(error && error.length > 0){ %>
    <div class="alert alert-danger" role="alert">
      <%= error %>
    </div>
  <% } %>

  <% if(success && success.length > 0){ %>
    <div class="alert alert-success" role="alert">
      <%= success %>
    </div>
  <% } %>
